

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>cvpysdk.instances.sybaseinstance &mdash; Developer SDK - Python 11.22 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Developer SDK - Python
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Developer SDK - Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>cvpysdk.instances.sybaseinstance</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for cvpysdk.instances.sybaseinstance</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Copyright Commvault Systems, Inc.</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="c1"># --------------------------------------------------------------------------</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">File for operating on a Sybase Instance.</span>

<span class="sd">SybaseInstance is the only class defined in this file.</span>
<span class="sd">SybaseInstance: Derived class from Instance Base class, representing an</span>
<span class="sd">                            sybase instance, and to perform operations on that instance</span>

<span class="sd">SybaseInstance:</span>

<span class="sd">    __init__()                      -- initialise object of Sybase  Instance associated with</span>
<span class="sd">                                       the specified agent</span>

<span class="sd">    _get_sybase_restore_json()      -- Private Method to construct restore JSON for</span>
<span class="sd">                                       individual database restore</span>

<span class="sd">    _get_sybase_full_restore_json() -- Private Method to construct</span>
<span class="sd">                                       restore JSON for fullserver restore</span>

<span class="sd">    _get_single_database_json()     -- Private Method to construct</span>
<span class="sd">                                       restore JSON for individual database restore</span>

<span class="sd">    _get_server_content()           -- Private Method to construct restore JSON for</span>
<span class="sd">                                       individual database when we have rename device options</span>


<span class="sd">    _restore_common_options_json()  -- setter for common options property in restore</span>

<span class="sd">    _restore_destination_json()     -- setter for destination options property in restore</span>

<span class="sd">    _restore_sybase_option_json()   -- setter for Sybase restore option property in restore</span>

<span class="sd">    sybase_home()                   -- returns string of sybase_home Property of Sybase instance</span>

<span class="sd">    sybase_instance_name()          -- returns sybase instance name without any case change</span>

<span class="sd">    is_discovery_enabled()          -- returns bool value of autodiscovery option</span>
<span class="sd">                                       at given sybase instance level</span>

<span class="sd">    localadmin_user()               -- returns string of localadmin_user of given sybase instance</span>

<span class="sd">    sa_user()                       -- returns string of sybase sa_user of given sybase instance</span>

<span class="sd">    version()                       -- returns string of given sybase server version</span>

<span class="sd">    backup_server()                 -- returns string of backup_server for given sybase instance</span>

<span class="sd">    sybase_ocs()                    -- returns string of sybase_ocs for given sybase instance</span>

<span class="sd">    sybase_ase()                    -- returns string of sybase_ase for given sybase  instance</span>

<span class="sd">    sybase_blocksize()              -- returns integer of block</span>
<span class="sd">                                       size for given sybase instance</span>

<span class="sd">    sybase_configfile()             -- returns string of sybase_configfile</span>
<span class="sd">                                       for given sybase instance</span>

<span class="sd">    sybase_sharedmemory_directory() -- returns string of sybase_memory_directory</span>
<span class="sd">                                       for given sybase instance</span>

<span class="sd">    restore_sybase_server()         -- Performs full sybase server restore</span>

<span class="sd">    restore_database()              -- Performs individual databases restore</span>

<span class="sd">    restore_to_disk()               -- Perform restore to disk [Application free restore] for sybase</span>

<span class="sd">&quot;&quot;&quot;</span>


<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">.dbinstance</span> <span class="kn">import</span> <span class="n">DatabaseInstance</span>
<span class="kn">from</span> <span class="nn">..exception</span> <span class="kn">import</span> <span class="n">SDKException</span>


<div class="viewcode-block" id="SybaseInstance"><a class="viewcode-back" href="../../../source/cvpysdk.instances.html#cvpysdk.instances.sybaseinstance.SybaseInstance">[docs]</a><span class="k">class</span> <span class="nc">SybaseInstance</span><span class="p">(</span><span class="n">DatabaseInstance</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to represent a standalone Sybase Instance</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_object</span><span class="p">,</span> <span class="n">instance_name</span><span class="p">,</span> <span class="n">instance_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the object of Sybase Instance class</span>

<span class="sd">            Args:</span>
<span class="sd">                agent_object    (object) --     instance of the Agent class</span>

<span class="sd">                instance_name   (str)    --     name of the instance</span>

<span class="sd">                instance_id     (str)    --     id of the instance</span>
<span class="sd">                                                default None</span>

<span class="sd">            Returns :</span>
<span class="sd">                (object) - instance of the Sybase Instance class</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sybase_restore_json</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_commonoption_restore_json</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_destination_restore_json</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SybaseInstance</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">agent_object</span><span class="p">,</span> <span class="n">instance_name</span><span class="p">,</span> <span class="n">instance_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_instanceprop</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># instance variable to hold instance properties</span>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sybase_home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns sybase home</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str) - string representing sybase home</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseInstance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseHome&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sybase_instance_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns sybase instance name with actual case without any conversion</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str) - string representing sybase instance name</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;instance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;instanceName&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_discovery_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns autodiscovery enable status</span>

<span class="sd">            Returns:</span>
<span class="sd">                bool - boolean value beased on autodiscovery enable status.</span>

<span class="sd">                    True  - returns True if autodiscovery is enabled</span>

<span class="sd">                    False - returns False if autodiscosvery is not enabled</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseInstance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;enableAutoDiscovery&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">localadmin_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns for local admin user</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str) - string representing local admin user</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseInstance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;localAdministrator&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;userName&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sa_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns for sa username</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str) - string representing sa username</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseInstance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;saUser&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;userName&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns for sybase version</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str) - string representing sybase version</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">backup_server</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns for backup server</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str) - string representing backup server</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseInstance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;backupServer&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sybase_ocs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns for sybase ocs</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str) - string representing sybase OCS</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseInstance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseOCS&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sybase_ase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns for sybase ase</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str) - string representing sybase ASE</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseInstance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseASE&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sybase_blocksize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns for sybase blocksize</span>

<span class="sd">            Returns:</span>
<span class="sd">                (int) - integer representing block size value</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseInstance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseBlockSize&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sybase_configfile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns for sybase configfile</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str) - string representing sybase config file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseInstance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;configFile&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sybase_sharedmemory_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns for sybase shared memory directory</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str)  -    string representing sybase</span>
<span class="sd">                            sybase shared memory directory</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sybaseInstance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sharedMemoryDirectory&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">client_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns client name of this instance</span>

<span class="sd">            Returns:</span>
<span class="sd">                (str) - client name as registered in the commcell</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;instance&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;clientName&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_restore_common_options_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setter for the Common options in restore JSON</span>

<span class="sd">            Args:</span>
<span class="sd">                value   (dict)  --  dict of common options</span>
<span class="sd">                                    for restore json</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_commonoption_restore_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;indexFreeRestore&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;index_free_restore&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="s2">&quot;restoreToDisk&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;restore_to_disk&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="s2">&quot;sybaseCreateDevices&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sybase_create_device&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_restore_destination_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setter for the Sybase Destination options in restore JSON</span>

<span class="sd">            Args:</span>
<span class="sd">                    value   (dict)  --  dict of values for destination option</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_destination_restore_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;destinationInstance&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;clientName&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;destination_client&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;instanceName&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;destination_instance_name&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;appName&quot;</span><span class="p">:</span> <span class="s2">&quot;Sybase&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;destClient&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;clientName&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;destination_client&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="s2">&quot;destPath&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;destination_path&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)]</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_restore_sybase_option_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setter for the sybase restore option in restore JSON</span>

<span class="sd">            Args:</span>
<span class="sd">                value   (dict)  --  dict of values for sybase option</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;to_time&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">time_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">time_dict</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;timeValue&quot;</span><span class="p">:</span><span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;to_time&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sybase_restore_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;sybaseRecoverType&quot;</span><span class="p">:</span> <span class="s2">&quot;STATE_RECOVER&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pointofTime&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;point_in_time&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;destinationServer&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;destination_instance_name&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="s2">&quot;pointInTime&quot;</span><span class="p">:</span> <span class="n">time_dict</span><span class="p">,</span>
            <span class="s2">&quot;instanceRestore&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;instance_restore&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;renameDatabases&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rename_databases&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;restoreType&quot;</span><span class="p">:</span> <span class="s2">&quot;POINT_IN_TIME&quot;</span><span class="p">,</span>
            <span class="s2">&quot;sybaseDatabase&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;syb_db&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_restore_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the JSON request to pass to the API as per the options selected by the user.</span>

<span class="sd">                Args:</span>
<span class="sd">                    kwargs   (list)  --  list of options need to be set for restore</span>

<span class="sd">                Returns:</span>
<span class="sd">                   (dict) - JSON request to pass to the API</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">restore_json</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">SybaseInstance</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_restore_json</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">restore_option</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;restore_option&quot;</span><span class="p">):</span>
            <span class="n">restore_option</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;restore_option&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;restore_option&quot;</span><span class="p">:</span>
                    <span class="n">restore_option</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">restore_option</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_restore_sybase_option_json</span><span class="p">(</span><span class="n">restore_option</span><span class="p">)</span>
        <span class="n">restore_json</span><span class="p">[</span><span class="s2">&quot;taskInfo&quot;</span><span class="p">][</span><span class="s2">&quot;subTasks&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;options&quot;</span><span class="p">][</span>
            <span class="s2">&quot;restoreOptions&quot;</span><span class="p">][</span><span class="s2">&quot;sybaseRstOption&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sybase_restore_json</span>
        <span class="k">return</span> <span class="n">restore_json</span>

    <span class="k">def</span> <span class="nf">_get_sybase_restore_base_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                      <span class="n">destination_client</span><span class="p">,</span>
                                      <span class="n">destination_instance_name</span><span class="p">,</span>
                                      <span class="n">point_in_time</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">instance_restore</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">timevalue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                      <span class="n">sybase_create_device</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">rename_databases</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">copy_precedence</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns basic sybase restore JSON based on given combination of parameters</span>

<span class="sd">            Args:</span>
<span class="sd">                destination_client_name    (str)    -- sybase destination client for restore</span>

<span class="sd">                destination_instance_name  (str)    -- sybase destination instance for restore</span>

<span class="sd">                point_in_time              (bool)   -- determines point_in_time based restore or not</span>
<span class="sd">                                                       default : False</span>

<span class="sd">                instance_restore           (bool)   -- determines if its single database or</span>
<span class="sd">                                                       complete sybase server restore</span>
<span class="sd">                                                       default : False</span>

<span class="sd">                timevalue                  (str)    -- for point_in_time based restore</span>
<span class="sd">                                                       format: YYYY-MM-DD HH:MM:SS</span>
<span class="sd">                                                       default : None</span>

<span class="sd">                sybase_create_device       (bool)   -- determines whether to createdevice for</span>
<span class="sd">                                                       sybase database restore</span>
<span class="sd">                                                       default : False</span>

<span class="sd">                rename_databases           (bool)   -- determines whether renamedatabase option</span>
<span class="sd">                                                       chosen for given database restore</span>
<span class="sd">                                                       default : False</span>

<span class="sd">                copy_precedence            (int)    -- copy precedence value of storage policy</span>
<span class="sd">                                                       default: 0</span>


<span class="sd">            Return:</span>
<span class="sd">                (dict)  -    returns base sybase restore json</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">copy_precedence_applicable</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">copy_precedence</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">copy_precedence_applicable</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">instance_restore</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">point_in_time</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">timevalue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
                <span class="n">current_time</span> <span class="o">=</span> <span class="n">current_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
                <span class="n">timevalue</span> <span class="o">=</span> <span class="n">current_time</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">timevalue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">point_in_time</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">):</span>
                <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
                <span class="n">current_time</span> <span class="o">=</span> <span class="n">current_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
                <span class="n">timevalue</span> <span class="o">=</span> <span class="n">current_time</span>
        <span class="n">syb_db</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">basic_sybase_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restore_json</span><span class="p">(</span>
            <span class="n">destination_client</span><span class="o">=</span><span class="n">destination_client</span><span class="p">,</span>
            <span class="n">destination_instance_name</span><span class="o">=</span><span class="n">destination_instance_name</span><span class="p">,</span>
            <span class="n">point_in_time</span><span class="o">=</span><span class="n">point_in_time</span><span class="p">,</span>
            <span class="n">instance_restore</span><span class="o">=</span><span class="n">instance_restore</span><span class="p">,</span>
            <span class="n">to_time</span><span class="o">=</span><span class="n">timevalue</span><span class="p">,</span>
            <span class="n">from_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">sybase_create_device</span><span class="o">=</span><span class="n">sybase_create_device</span><span class="p">,</span>
            <span class="n">rename_databases</span><span class="o">=</span><span class="n">rename_databases</span><span class="p">,</span>
            <span class="n">copy_precedence</span><span class="o">=</span><span class="n">copy_precedence</span><span class="p">,</span>
            <span class="n">copy_precedence_applicable</span><span class="o">=</span><span class="n">copy_precedence_applicable</span><span class="p">,</span>
            <span class="n">syb_db</span><span class="o">=</span><span class="n">syb_db</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">basic_sybase_options</span>

    <span class="k">def</span> <span class="nf">_db_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">database_list</span><span class="p">,</span>
                   <span class="n">rename_databases</span><span class="p">,</span>
                   <span class="n">sybase_create_device</span><span class="p">,</span>
                   <span class="n">device_options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs  database option for</span>
<span class="sd">        each databases in database list</span>

<span class="sd">            Args:</span>
<span class="sd">                database_list           (list)          --  list of databases opted for restore</span>

<span class="sd">                sybase_create_device    (bool)          --  determines whether to createdevice</span>
<span class="sd">                                                            for sybase database restore</span>

<span class="sd">                rename_databases        (bool)          --  determines whether renamedatabase option</span>
<span class="sd">                                                            chosen for given database restore</span>

<span class="sd">                device_options          (dict(dict))    --  list of dict for each database with</span>
<span class="sd">                                                            device rename and database</span>
<span class="sd">                                                            rename options</span>

<span class="sd">            Returns:</span>
<span class="sd">                (dict)    -     list of db_options to</span>
<span class="sd">                                be added to restore_json</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">db_options</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">dbname</span> <span class="ow">in</span> <span class="n">database_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">device_options</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">db_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_single_database_json</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="n">dbname</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">dbname</span> <span class="ow">in</span> <span class="n">device_options</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">dev_opt</span> <span class="o">=</span> <span class="n">device_options</span><span class="p">[</span><span class="n">dbname</span><span class="p">]</span>
                    <span class="n">db_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_single_database_json</span><span class="p">(</span>
                        <span class="n">dbname</span><span class="p">,</span> <span class="n">dev_opt</span><span class="p">,</span> <span class="n">rename_databases</span><span class="p">,</span> <span class="n">sybase_create_device</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">db_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_single_database_json</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="n">dbname</span><span class="p">)</span>
            <span class="n">db_options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">db_json</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">db_options</span>

    <span class="k">def</span> <span class="nf">_get_sybase_restore_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                 <span class="n">destination_client</span><span class="p">,</span>
                                 <span class="n">destination_instance_name</span><span class="p">,</span>
                                 <span class="n">database_list</span><span class="p">,</span>
                                 <span class="n">timevalue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">sybase_create_device</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">rename_databases</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">device_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">copy_precedence</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs sybase restore JSON for individual Database restore</span>

<span class="sd">            Args:</span>
<span class="sd">                destination_client_name         (str)           --  sybase destination client</span>
<span class="sd">                                                                    for restore</span>

<span class="sd">                destination_instance_name       (str)           --  sybase destination instance</span>
<span class="sd">                                                                    for restore</span>

<span class="sd">                database_list                   (list)          --  list of databases for restore</span>

<span class="sd">                timevalue                       (str)           --  for point_in_time based restore</span>
<span class="sd">                                                                    format: YYYY-MM-DD HH:MM:SS</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                sybase_create_device            (bool)          --  determines whether to</span>
<span class="sd">                                                                    createdevice</span>
<span class="sd">                                                                    for sybase database restore</span>
<span class="sd">                                                                    default : False</span>

<span class="sd">                rename_databases                (bool)          --  determines whether</span>
<span class="sd">                                                                    renamedatabase option</span>
<span class="sd">                                                                    enabled or not</span>
<span class="sd">                                                                    default : False</span>

<span class="sd">                device_options                  (dict(dict))    --  dict of dict for each</span>
<span class="sd">                                                                    database with device</span>
<span class="sd">                                                                    and database rename options</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                copy_precedence                 (int)           --  copy precedence of</span>
<span class="sd">                                                                    storage policy</span>
<span class="sd">                                                                    default: 0</span>

<span class="sd">            Returns:</span>
<span class="sd">                    (dict)    -   return restore JSON for individual Sybase database restored</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">instance_restore</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">point_in_time</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># Check to perform renamedatabase/create device</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">sybase_create_device</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">rename_databases</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">):</span>
            <span class="n">device_options</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">restore_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sybase_restore_base_json</span><span class="p">(</span>
            <span class="n">destination_client</span><span class="p">,</span>
            <span class="n">destination_instance_name</span><span class="p">,</span>
            <span class="n">point_in_time</span><span class="p">,</span>
            <span class="n">instance_restore</span><span class="p">,</span>
            <span class="n">timevalue</span><span class="p">,</span>
            <span class="n">sybase_create_device</span><span class="p">,</span>
            <span class="n">rename_databases</span><span class="p">,</span>
            <span class="n">copy_precedence</span>
        <span class="p">)</span>

        <span class="n">db_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_db_option</span><span class="p">(</span>
            <span class="n">database_list</span><span class="p">,</span> <span class="n">rename_databases</span><span class="p">,</span> <span class="n">sybase_create_device</span><span class="p">,</span> <span class="n">device_options</span>
        <span class="p">)</span>
        <span class="n">restore_json</span><span class="p">[</span><span class="s2">&quot;taskInfo&quot;</span><span class="p">][</span><span class="s2">&quot;subTasks&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;options&quot;</span><span class="p">][</span><span class="s2">&quot;restoreOptions&quot;</span><span class="p">][</span>
            <span class="s2">&quot;sybaseRstOption&quot;</span><span class="p">][</span><span class="s2">&quot;sybaseDatabase&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">db_options</span>
        <span class="k">return</span> <span class="n">restore_json</span>

    <span class="k">def</span> <span class="nf">_get_sybase_full_restore_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                      <span class="n">destination_client</span><span class="p">,</span>
                                      <span class="n">destination_instance_name</span><span class="p">,</span>
                                      <span class="n">point_in_time</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">timevalue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                      <span class="n">sybase_create_device</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                      <span class="n">rename_databases</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">device_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                      <span class="n">copy_precedence</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates JSON for Full server restore</span>

<span class="sd">            Args:</span>
<span class="sd">                destination_client_name         (str)           --  sybase destination client</span>
<span class="sd">                                                                    for restore</span>

<span class="sd">                destination_instance_name       (str)           --  sybase destination instance</span>
<span class="sd">                                                                    for restore</span>

<span class="sd">                point_in_time                   (bool)          --  determines point_in_time</span>
<span class="sd">                                                                    restore or not</span>
<span class="sd">                                                                    default : False</span>

<span class="sd">                timevalue                       (str)           --  for point_in_time based restore</span>
<span class="sd">                                                                    format: YYYY-MM-DD HH:MM:SS</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                sybase_create_device            (bool)          --  determines whether to</span>
<span class="sd">                                                                    createdevice</span>
<span class="sd">                                                                    for sybase database restore</span>
<span class="sd">                                                                    default : True</span>

<span class="sd">                rename_databases                (bool)          --  determines whether</span>
<span class="sd">                                                                    renamedatabase option</span>
<span class="sd">                                                                    enabled or not</span>
<span class="sd">                                                                    default : False</span>

<span class="sd">                device_options                  (dict(dict))    --  dict of dict for each</span>
<span class="sd">                                                                    database with device</span>
<span class="sd">                                                                    and database</span>
<span class="sd">                                                                    rename options</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                copy_precedence                 (int)           --  copy precedence of</span>
<span class="sd">                                                                    storage policy</span>
<span class="sd">                                                                    default: 0</span>

<span class="sd">            Returns:</span>
<span class="sd">                    (dict) -   return restore JSON for Full sybase server restore</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">instance_restore</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">restore_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sybase_restore_base_json</span><span class="p">(</span>
            <span class="n">destination_client</span><span class="p">,</span>
            <span class="n">destination_instance_name</span><span class="p">,</span>
            <span class="n">point_in_time</span><span class="p">,</span>
            <span class="n">instance_restore</span><span class="p">,</span>
            <span class="n">timevalue</span><span class="p">,</span>
            <span class="n">sybase_create_device</span><span class="p">,</span>
            <span class="n">rename_databases</span><span class="p">,</span>
            <span class="n">copy_precedence</span><span class="p">)</span>
        <span class="n">db_options</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dblist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_server_content</span><span class="p">()</span>
        <span class="n">device_options_keys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">device_options</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">device_options</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">device_options_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">dblist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span>
                <span class="s1">&#39;Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;102&#39;</span><span class="p">,</span> <span class="s1">&#39;Database contents of Sybase server is empty&#39;</span>
            <span class="p">)</span>

        <span class="n">database_list</span> <span class="o">=</span> <span class="n">dblist</span>
        <span class="n">db_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_db_option</span><span class="p">(</span>
            <span class="n">database_list</span><span class="p">,</span> <span class="n">rename_databases</span><span class="p">,</span> <span class="n">sybase_create_device</span><span class="p">,</span> <span class="n">device_options</span><span class="p">)</span>
        <span class="n">restore_json</span><span class="p">[</span><span class="s2">&quot;taskInfo&quot;</span><span class="p">][</span><span class="s2">&quot;subTasks&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;options&quot;</span><span class="p">][</span><span class="s2">&quot;restoreOptions&quot;</span><span class="p">][</span>
            <span class="s2">&quot;sybaseRstOption&quot;</span><span class="p">][</span><span class="s2">&quot;sybaseDatabase&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">db_options</span>
        <span class="k">return</span> <span class="n">restore_json</span>

    <span class="k">def</span> <span class="nf">_get_single_database_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                  <span class="n">dbname</span><span class="p">,</span>
                                  <span class="n">device_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                  <span class="n">rename_databases</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                  <span class="n">sybase_create_device</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs database JSON for individual</span>
<span class="sd">        Sybase databases with create device and rename database parameters</span>

<span class="sd">            Args:</span>
<span class="sd">                dbname                  (str)              --   Database name opted for restore</span>

<span class="sd">                device_options          (dict(dict))       --   dict of dict for given database</span>
<span class="sd">                                                                with device and database</span>
<span class="sd">                                                                rename option</span>


<span class="sd">                sybase_create_device    (bool)             --   determines whether to createdevice</span>
<span class="sd">                                                                for sybase database restore</span>

<span class="sd">                rename_databases        (bool)             --   determines whether renamedatabase</span>
<span class="sd">                                                                option chosen for given</span>
<span class="sd">                                                                database restore</span>
<span class="sd">            Returns:</span>
<span class="sd">                (dict)    -     Individual Database option with restore[</span>
<span class="sd">                                for rename and create device]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sybase_db_details</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">databasechain</span> <span class="o">=</span> <span class="s2">&quot;0:0:</span><span class="si">{0}</span><span class="s2">:0&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dbname</span><span class="p">)</span>
        <span class="n">dbchain_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dbchain_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">databasechain</span><span class="p">)</span>
        <span class="n">subclientid</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
        <span class="n">dbid</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
        <span class="n">datadevid</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
        <span class="n">logdevid</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
        <span class="n">size</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
        <span class="n">device</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">sybase_db_details</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;databaseId&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">dbname</span><span class="p">},</span>
            <span class="s2">&quot;associatedSubClientId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;databaseChain&quot;</span><span class="p">:</span> <span class="n">dbchain_list</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">device_options</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sybase_create_device</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key1</span><span class="p">,</span> <span class="n">value1</span> <span class="ow">in</span> <span class="n">device_options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">device_options</span><span class="p">[</span><span class="n">key1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">key1</span> <span class="o">==</span> <span class="s2">&quot;newdatabasename&quot;</span><span class="p">:</span>
                            <span class="n">device_options</span><span class="p">[</span><span class="n">key1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">device_options</span><span class="p">[</span><span class="n">key1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key1</span><span class="p">,</span> <span class="n">value1</span> <span class="ow">in</span> <span class="n">device_options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key1</span> <span class="o">==</span> <span class="s2">&quot;newdatabasename&quot;</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">device_options</span><span class="p">[</span><span class="n">key1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>

            <span class="n">datadevicename</span> <span class="o">=</span> <span class="n">device_options</span><span class="p">[</span><span class="s2">&quot;datadevicename&quot;</span><span class="p">]</span>
            <span class="n">newdatadevicename</span> <span class="o">=</span> <span class="n">device_options</span><span class="p">[</span><span class="s2">&quot;newdatadevicename&quot;</span><span class="p">]</span>
            <span class="n">newdatadevicepath</span> <span class="o">=</span> <span class="n">device_options</span><span class="p">[</span><span class="s2">&quot;newdatadevicepath&quot;</span><span class="p">]</span>
            <span class="n">logdevicename</span> <span class="o">=</span> <span class="n">device_options</span><span class="p">[</span><span class="s2">&quot;logdevicename&quot;</span><span class="p">]</span>
            <span class="n">newlogdevicename</span> <span class="o">=</span> <span class="n">device_options</span><span class="p">[</span><span class="s2">&quot;newlogdevicename&quot;</span><span class="p">]</span>
            <span class="n">newlogdevicepath</span> <span class="o">=</span> <span class="n">device_options</span><span class="p">[</span><span class="s2">&quot;newlogdevicepath&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">rename_databases</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">device_options</span><span class="p">[</span><span class="s2">&quot;newdatabasename&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">newdatabasename</span> <span class="o">=</span> <span class="n">dbname</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newdatabasename</span> <span class="o">=</span> <span class="n">device_options</span><span class="p">[</span><span class="s2">&quot;newdatabasename&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">device_options</span><span class="p">[</span><span class="s2">&quot;newdatabasename&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dbname</span>

            <span class="c1"># Check to find given device is system device</span>

            <span class="n">system_databases</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;master&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">,</span> <span class="s1">&#39;sybsystemprocs&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;sybsystemdb&#39;</span><span class="p">,</span> <span class="s1">&#39;tempdb&#39;</span><span class="p">,</span> <span class="s1">&#39;sybmgmtdb&#39;</span><span class="p">,</span> <span class="s1">&#39;dbccdb&#39;</span><span class="p">,</span> <span class="s1">&#39;sybsecurity&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">dbname</span> <span class="ow">in</span> <span class="n">system_databases</span><span class="p">:</span>
                <span class="n">newdatadevicename</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
                <span class="n">newlogdevicename</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
                <span class="n">newdatabasename</span> <span class="o">=</span> <span class="n">dbname</span>
            <span class="n">data_device</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">:</span><span class="si">{1}</span><span class="s2">:</span><span class="si">{2}</span><span class="s2">:</span><span class="si">{3}</span><span class="s2">:</span><span class="si">{4}</span><span class="s2">:</span><span class="si">{5}</span><span class="s2">:</span><span class="si">{6}</span><span class="s2">:</span><span class="si">{7}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">subclientid</span><span class="p">,</span>
                                                                   <span class="n">dbid</span><span class="p">,</span>
                                                                   <span class="n">datadevid</span><span class="p">,</span>
                                                                   <span class="n">datadevicename</span><span class="p">,</span>
                                                                   <span class="n">newdatadevicename</span><span class="p">,</span>
                                                                   <span class="n">newdatadevicepath</span><span class="p">,</span>
                                                                   <span class="n">size</span><span class="p">,</span>
                                                                   <span class="n">newdatabasename</span><span class="p">)</span>

            <span class="n">log_device</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">:</span><span class="si">{1}</span><span class="s2">:</span><span class="si">{2}</span><span class="s2">:</span><span class="si">{3}</span><span class="s2">:</span><span class="si">{4}</span><span class="s2">:</span><span class="si">{5}</span><span class="s2">:</span><span class="si">{6}</span><span class="s2">:</span><span class="si">{7}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">subclientid</span><span class="p">,</span>
                                                                  <span class="n">dbid</span><span class="p">,</span>
                                                                  <span class="n">logdevid</span><span class="p">,</span>
                                                                  <span class="n">logdevicename</span><span class="p">,</span>
                                                                  <span class="n">newlogdevicename</span><span class="p">,</span>
                                                                  <span class="n">newlogdevicepath</span><span class="p">,</span>
                                                                  <span class="n">size</span><span class="p">,</span>
                                                                  <span class="n">newdatabasename</span><span class="p">)</span>

            <span class="n">device</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_device</span><span class="p">)</span>
            <span class="n">device</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">log_device</span><span class="p">)</span>
            <span class="n">sybase_db_details</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;databaseId&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">dbname</span><span class="p">},</span>
                <span class="s2">&quot;associatedSubClientId&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;databaseChain&quot;</span><span class="p">:</span> <span class="n">dbchain_list</span><span class="p">,</span>
                <span class="s2">&quot;devices&quot;</span><span class="p">:</span> <span class="n">device</span>
            <span class="p">}</span>

        <span class="k">return</span> <span class="n">sybase_db_details</span>

    <span class="k">def</span> <span class="nf">_get_server_content</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        To get all databases for the speicfied Sybase Server instance</span>

<span class="sd">        Returns:</span>
<span class="sd">            (list)      -       list of databases available as server content</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">subclient_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subclients</span><span class="o">.</span><span class="n">_get_subclients</span><span class="p">()</span>
        <span class="n">subclient_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">db_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">subclient_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">subclient_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">subclient_list</span><span class="p">:</span>
            <span class="n">sub_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subclients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">sub_obj</span><span class="o">.</span><span class="n">content</span>
            <span class="k">for</span> <span class="n">eachdb</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
                <span class="n">db_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">eachdb</span><span class="p">)</span>
        <span class="n">db_list</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">db_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">db_list</span>

<div class="viewcode-block" id="SybaseInstance.restore_sybase_server"><a class="viewcode-back" href="../../../source/cvpysdk.instances.html#cvpysdk.instances.sybaseinstance.SybaseInstance.restore_sybase_server">[docs]</a>    <span class="k">def</span> <span class="nf">restore_sybase_server</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                              <span class="n">destination_client</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">destination_instance_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">point_in_time</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                              <span class="n">timevalue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">rename_databases</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                              <span class="n">device_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">copy_precedence</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs Full sybase server restore</span>

<span class="sd">            Args:</span>
<span class="sd">                destination_client_name     (str)               --  sybase destination client</span>
<span class="sd">                                                                    for restore</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                destination_instance_name   (str)               --  sybase destination instance</span>
<span class="sd">                                                                    for restore</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                point_in_time               (bool)              --  determines point_in_time</span>
<span class="sd">                                                                    restore or not</span>
<span class="sd">                                                                    default:False</span>

<span class="sd">                timevalue                   (str)               --  for point_in_time based restore</span>
<span class="sd">                                                                    format: YYYY-MM-DD HH:MM:SS</span>
<span class="sd">                                                                    default : None</span>


<span class="sd">                rename_databases            (bool)              --  determines whether</span>
<span class="sd">                                                                    renamedatabase option chosen</span>
<span class="sd">                                                                    default:False</span>


<span class="sd">                device_options              (dict(dict))        --  dict of dict for each database</span>
<span class="sd">                                                                    with device and database</span>
<span class="sd">                                                                    rename options</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                copy_precedence             (int)               --  copy precedence of storage</span>
<span class="sd">                                                                    policy</span>
<span class="sd">                                                                    default: 0</span>

<span class="sd">            Note:</span>

<span class="sd">            Also This is dict  of dict having sourcedatabasenamead</span>
<span class="sd">            Key and set of another dict options</span>
<span class="sd">            as value corresponding to that source Database.</span>

<span class="sd">            Also if you wouldn&#39;t want to pass value for particular option , mark it none</span>

<span class="sd">            Dict format : &quot;sourceDBname&quot;:&quot;dict options&quot;</span>

<span class="sd">                    Example: device_options = {}</span>
<span class="sd">                        &quot;db1&quot;:</span>
<span class="sd">                            {</span>
<span class="sd">                                        &quot;datadevicename&quot;:&quot;testdata&quot;,</span>

<span class="sd">                                        &quot;newdatadevicename&quot;:&quot;testdatanew&quot;,</span>

<span class="sd">                                        &quot;newdatadevicepath&quot;:&quot;/opt/sap/data/testdatanew.dat&quot;,</span>

<span class="sd">                                        &quot;logdevicename&quot;:&quot;testlog&quot;,</span>

<span class="sd">                                        &quot;newlogdevicename&quot;:&quot;testlognew&quot;,</span>

<span class="sd">                                        &quot;newlogdevicepath&quot;:&quot;/opt/sap/data/testlognew.dat&quot;,</span>

<span class="sd">                                        &quot;newdatabasename&quot;: &quot;db1new&quot;</span>

<span class="sd">                            },</span>

<span class="sd">                        &quot;model&quot;:</span>
<span class="sd">                            {</span>
<span class="sd">                                        &quot;datadevicename&quot;:None,</span>

<span class="sd">                                        &quot;newdatadevicename&quot;:None,</span>

<span class="sd">                                        &quot;newdatadevicepath&quot;:None,</span>

<span class="sd">                                        &quot;logdevicename&quot;:None,</span>

<span class="sd">                                        &quot;newlogdevicename&quot;:None,</span>

<span class="sd">                                        &quot;newlogdevicepath&quot;:None,</span>

<span class="sd">                                        &quot;newdatabasename&quot;: &quot;modelnew&quot;</span>

<span class="sd">                            }</span>

<span class="sd">                    }</span>

<span class="sd">            Note : Devices corresponding to System database cannot be renamed</span>

<span class="sd">            Returns:</span>
<span class="sd">                (object)    -     Job containing restore details</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">destination_client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">destination_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_name</span>

        <span class="k">if</span> <span class="n">destination_instance_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">destination_instance_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span>

        <span class="n">sybase_create_device</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">request_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sybase_full_restore_json</span><span class="p">(</span>
            <span class="n">destination_client</span><span class="p">,</span>
            <span class="n">destination_instance_name</span><span class="p">,</span>
            <span class="n">point_in_time</span><span class="p">,</span>
            <span class="n">timevalue</span><span class="p">,</span>
            <span class="n">sybase_create_device</span><span class="p">,</span>
            <span class="n">rename_databases</span><span class="p">,</span>
            <span class="n">device_options</span><span class="p">,</span>
            <span class="n">copy_precedence</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_restore_response</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span></div>

<div class="viewcode-block" id="SybaseInstance.restore_database"><a class="viewcode-back" href="../../../source/cvpysdk.instances.html#cvpysdk.instances.sybaseinstance.SybaseInstance.restore_database">[docs]</a>    <span class="k">def</span> <span class="nf">restore_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">destination_client</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">destination_instance_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">database_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">timevalue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">sybase_create_device</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">rename_databases</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">device_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">copy_precedence</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs individual database restores</span>

<span class="sd">            Args:</span>

<span class="sd">                destination_client_name     (str)               --  destination client for restore</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                destination_instance_name   (str)               --  destination instance</span>
<span class="sd">                                                                    for restore</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                database_list               (list)              --  list of databases for restore</span>

<span class="sd">                timevalue                   (str)               --  for point_in_time based restore</span>
<span class="sd">                                                                    format: YYYY-MM-DD HH:MM:SS</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                sybase_create_device        (bool)              --  determines whether to create</span>
<span class="sd">                                                                    device for database restore</span>
<span class="sd">                                                                    default:False</span>

<span class="sd">                rename_databases            (bool)              --  determines whether</span>
<span class="sd">                                                                    renamedatabase option chosen</span>
<span class="sd">                                                                    default:False</span>

<span class="sd">                device_options              (dict(dict))        --  dict of dict for each database</span>
<span class="sd">                                                                    with device and database</span>
<span class="sd">                                                                    rename options</span>
<span class="sd">                                                                    default : None</span>

<span class="sd">                copy_precedence             (int)               --  copy precedence of storage</span>
<span class="sd">                                                                    policy</span>
<span class="sd">                                                                    default: 0</span>
<span class="sd">            Note :</span>

<span class="sd">            Also This is dict  of dict having sourcedatabasename</span>
<span class="sd">            as Key and set of another dict options</span>
<span class="sd">            as value corresponding to that source Database.</span>

<span class="sd">            Also if you wouldn&#39;t want to pass</span>
<span class="sd">            value for particular option , mark it none</span>


<span class="sd">                    Example: device_options = {</span>
<span class="sd">                        &quot;db1&quot;:</span>
<span class="sd">                            {</span>
<span class="sd">                                        &quot;datadevicename&quot;:&quot;testdata&quot;,</span>

<span class="sd">                                        &quot;newdatadevicename&quot;:&quot;testdatanew&quot;,</span>

<span class="sd">                                        &quot;newdatadevicepath&quot;:&quot;/opt/sap/data/testdatanew.dat&quot;,</span>

<span class="sd">                                        &quot;logdevicename&quot;:&quot;testlog&quot;,</span>

<span class="sd">                                        &quot;newlogdevicename&quot;:&quot;testlognew&quot;,</span>

<span class="sd">                                        &quot;newlogdevicepath&quot;:&quot;/opt/sap/data/testlognew.dat&quot;,</span>

<span class="sd">                                        &quot;newdatabasename&quot;: &quot;db1new&quot;</span>
<span class="sd">                            },</span>
<span class="sd">                        &quot;db2&quot;:</span>
<span class="sd">                        {</span>
<span class="sd">                                        &quot;datadevicename&quot;:None,</span>

<span class="sd">                                        &quot;newdatadevicename&quot;:None,</span>

<span class="sd">                                        &quot;newdatadevicepath&quot;:&quot;/opt/sap/data/testdatanew.dat&quot;,</span>

<span class="sd">                                        &quot;logdevicename&quot;:&quot;testlog&quot;,</span>

<span class="sd">                                        &quot;newlogdevicename&quot;:&quot;testlognew&quot;,</span>

<span class="sd">                                        &quot;newlogdevicepath&quot;:&quot;/opt/sap/data/testlognew.dat&quot;,</span>

<span class="sd">                                        &quot;newdatabasename&quot;: None</span>
<span class="sd">                        }</span>

<span class="sd">                    }</span>


<span class="sd">            Returns:</span>
<span class="sd">                (object)    -     Job containing restore details</span>

<span class="sd">            Raises:</span>
<span class="sd">                SDKException</span>
<span class="sd">                    if databaselist is empty</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">destination_client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">destination_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_name</span>

        <span class="k">if</span> <span class="n">destination_instance_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">destination_instance_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span>

        <span class="k">if</span> <span class="n">database_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Instance&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;102&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;Restore Database List cannot be empty&#39;</span><span class="p">)</span>

        <span class="n">request_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sybase_restore_json</span><span class="p">(</span>
            <span class="n">destination_client</span><span class="p">,</span>
            <span class="n">destination_instance_name</span><span class="p">,</span>
            <span class="n">database_list</span><span class="p">,</span>
            <span class="n">timevalue</span><span class="p">,</span>
            <span class="n">sybase_create_device</span><span class="p">,</span>
            <span class="n">rename_databases</span><span class="p">,</span>
            <span class="n">device_options</span><span class="p">,</span>
            <span class="n">copy_precedence</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_restore_response</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span></div>

<div class="viewcode-block" id="SybaseInstance.restore_to_disk"><a class="viewcode-back" href="../../../source/cvpysdk.instances.html#cvpysdk.instances.sybaseinstance.SybaseInstance.restore_to_disk">[docs]</a>    <span class="k">def</span> <span class="nf">restore_to_disk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">destination_client</span><span class="p">,</span>
                        <span class="n">destination_path</span><span class="p">,</span>
                        <span class="n">backup_job_ids</span><span class="p">,</span>
                        <span class="n">user_name</span><span class="p">,</span>
                        <span class="n">password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform restore to disk [Application free restore] for sybase</span>

<span class="sd">            Args:</span>
<span class="sd">                destination_client          (str)   --  destination client name</span>

<span class="sd">                destination_path:           (str)   --  destination path</span>

<span class="sd">                backup_job_ids              (list)  --  list of backup job IDs</span>
<span class="sd">                                                        to be used for disk restore</span>

<span class="sd">                user_name                   (str)   --  impersonation user name to</span>
<span class="sd">                                                        restore to destination client</span>

<span class="sd">                password                    (str)   --  impersonation user password</span>

<span class="sd">            Returns:</span>
<span class="sd">                (object)    -     Job containing restore details</span>

<span class="sd">            Raises:</span>
<span class="sd">                SDKException</span>
<span class="sd">                    if backup_job_ids not given as list of items</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">backup_job_ids</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Instance&#39;</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">)</span>
        <span class="n">request_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_restore_to_disk_json</span><span class="p">(</span><span class="n">destination_client</span><span class="p">,</span>
                                                      <span class="n">destination_path</span><span class="p">,</span>
                                                      <span class="n">backup_job_ids</span><span class="p">,</span>
                                                      <span class="n">user_name</span><span class="p">,</span>
                                                      <span class="n">password</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">request_json</span><span class="p">[</span><span class="s2">&quot;taskInfo&quot;</span><span class="p">][</span><span class="s2">&quot;subTasks&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;options&quot;</span><span class="p">][</span><span class="s2">&quot;restoreOptions&quot;</span><span class="p">][</span><span class="s2">&quot;sybaseRstOption&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_restore_response</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Commvault Systems® Inc. All Rights Reserved

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>