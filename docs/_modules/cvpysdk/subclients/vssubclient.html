
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cvpysdk.subclients.vssubclient &#8212; Developer SDK - Python 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for cvpysdk.subclients.vssubclient</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Copyright Â©2016 Commvault Systems, Inc.</span>
<span class="c1"># See LICENSE.txt in the project root for</span>
<span class="c1"># license information.</span>
<span class="c1"># --------------------------------------------------------------------------</span>

<span class="sd">&quot;&quot;&quot;File for operating on a Virtual Server Subclient.</span>

<span class="sd">VirualServerSubclient is the only class defined in this file.</span>

<span class="sd">VirtualServerSubclient: Derived class from Subclient Base class, representing a</span>
<span class="sd">                            virtual server subclient, and to perform operations on that subclient</span>

<span class="sd">VirtualServerSubclient:</span>
<span class="sd">    __get_subclient_properties()          --  gets the subclient  related properties of VSA subclient.</span>
<span class="sd">    </span>
<span class="sd">    _get_subclient_properties_json()     --  gets all the subclient  related properties of VSA subclient.</span>

<span class="sd">    _get_vm_ids_and_names_dict()            --  creates and returns 2 dictionaries, along with the </span>
<span class="sd">                                                    vm path</span>

<span class="sd">    _parse_vm_path()                        --  parses the path provided by user,</span>
<span class="sd">                                                    and replaces the VM Display Name with the VM ID</span>
<span class="sd">    </span>
<span class="sd">    _json_restore_virtualServerRstOption    --  setter for Virtualserver property in restore</span>
<span class="sd">    </span>
<span class="sd">    _json_restore_diskLevelVMRestoreOption  -- setter for diskLevel restore property in restore</span>
<span class="sd">    </span>
<span class="sd">    _json_restore_advancedRestoreOptions    -- setter for advanced restore property in restore</span>
<span class="sd">    </span>
<span class="sd">    _json_restore_volumeRstOption           -- setter for Volume restore property in restore</span>

<span class="sd">    _process_vsa_browse_response()          --  processes the browse response received from server,</span>
<span class="sd">                                                    and replaces the vm id with the vm name</span>

<span class="sd">    _process_restore_request()              --  processes the Restore Request and replaces the VM </span>
<span class="sd">                                                    display name with their ID before passing </span>
<span class="sd">                                                        to the API</span>
<span class="sd">    </span>
<span class="sd">    _get_disk_Extension()                   --  Gets the Extension of disk provided</span>

<span class="sd">    _get_conversion_disk_Type()             -- For source Disk gets the Disk that can be converted</span>
<span class="sd">                                                    to and set its destination Vendor</span>
<span class="sd">    </span>
<span class="sd">    _prepare_filelevel_restore_json()       -- internal Method can be used by subclasses for</span>
<span class="sd">                                                    file level restore Json</span>
<span class="sd">    </span>
<span class="sd">    _prepare_disk_restore_json              -- internal Method can be used by subclasses for </span>
<span class="sd">                                                    disk level restore Json</span>
<span class="sd">    </span>
<span class="sd">    _check_folder_in_browse                 -- Internal Method to check folder is in </span>
<span class="sd">                                                    browse from subclient</span>
<span class="sd">    </span>
<span class="sd">    browse()                                --  gets the content of the backup for this subclient</span>
<span class="sd">                                                    at the vm path specified</span>
<span class="sd">        </span>
<span class="sd">    disk_level_browse()                     --  browses the Disks of a Virtual Machine</span>

<span class="sd">    guest_files_browse()                    --  browses the Files and Folders </span>
<span class="sd">                                                    inside a Virtual Machine</span>


<span class="sd">    vm_files_browse()                       --  browses the Files and Folders </span>
<span class="sd">                                                    of a Virtual Machine</span>

<span class="sd">    vm_files_browse_in_time()               --  browses the Files and Folders of a Virtual Machine</span>
<span class="sd">                                            in the time range specified</span>
<span class="sd">    </span>
<span class="sd">    restore_out_of_place()                  --  restores the VM Guest Files specified in </span>
<span class="sd">                                                    the paths list to the client, at the</span>
<span class="sd">                                                        specified destionation location</span>

<span class="sd">    full_vm_restore_in_place()              --  restores the VM specified by the </span>
<span class="sd">                                                    user to the same location</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">..exception</span> <span class="k">import</span> <span class="n">SDKException</span>
<span class="kn">from</span> <span class="nn">..subclient</span> <span class="k">import</span> <span class="n">Subclient</span>
<span class="kn">from</span> <span class="nn">..client</span> <span class="k">import</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="k">import</span> <span class="n">constants</span>


<div class="viewcode-block" id="VirtualServerSubclient"><a class="viewcode-back" href="../../../subclients.html#cvpysdk.subclients.vssubclient.VirtualServerSubclient">[docs]</a><span class="k">class</span> <span class="nc">VirtualServerSubclient</span><span class="p">(</span><span class="n">Subclient</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Derived class from Subclient Base class, representing a virtual server subclient,</span>
<span class="sd">        and to perform operations on that subclient.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">backupset_object</span><span class="p">,</span> <span class="n">subclient_name</span><span class="p">,</span> <span class="n">subclient_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Decides which instance object needs to be created&quot;&quot;&quot;</span>

        <span class="n">hv_type</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">HyperVisorType</span>
        <span class="k">if</span><span class="p">(</span><span class="n">backupset_object</span><span class="o">.</span><span class="n">_instance_object</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">==</span> <span class="n">hv_type</span><span class="o">.</span><span class="n">MS_VIRTUAL_SERVER</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">virtualserver.hypervsubclient</span> <span class="k">import</span> <span class="n">HyperVVirtualServerSubclient</span>
            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">HyperVVirtualServerSubclient</span><span class="p">)</span>
        
        <span class="k">if</span><span class="p">(</span><span class="n">backupset_object</span><span class="o">.</span><span class="n">_instance_object</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">==</span> <span class="n">hv_type</span><span class="o">.</span><span class="n">GOOGLE_CLOUD</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">virtualserver.googlecloud_subclient</span> <span class="k">import</span> <span class="n">googlecloud_subclient</span>
            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">googlecloud_subclient</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">backupset_object</span><span class="p">,</span> <span class="n">subclient_name</span><span class="p">,</span> <span class="n">subclient_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize the Instance object for the given Virtual Server instance.</span>

<span class="sd">            Args:</span>
<span class="sd">                class_object (backupset_object,subclient_name,subclient_id)  --  instance of the </span>
<span class="sd">                                                                                    backupset class, </span>
<span class="sd">                                                                                    subclient name,</span>
<span class="sd">                                                                                    subclient id</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content_types</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="s1">&#39;Host&#39;</span><span class="p">,</span>
            <span class="s1">&#39;2&#39;</span><span class="p">:</span> <span class="s1">&#39;Resource Pool&#39;</span><span class="p">,</span>
            <span class="s1">&#39;4&#39;</span><span class="p">:</span> <span class="s1">&#39;Datacenter&#39;</span><span class="p">,</span>
            <span class="s1">&#39;9&#39;</span><span class="p">:</span> <span class="s1">&#39;Virtual Machine&#39;</span><span class="p">,</span>
            <span class="s1">&#39;16&#39;</span><span class="p">:</span> <span class="s1">&#39;All unprotected VMs&#39;</span><span class="p">,</span>
            <span class="s1">&#39;17&#39;</span><span class="p">:</span> <span class="s1">&#39;Root&#39;</span>
        <span class="p">}</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">VirtualServerSubclient</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span>
            <span class="n">backupset_object</span><span class="p">,</span> <span class="n">subclient_name</span><span class="p">,</span> <span class="n">subclient_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diskExtension</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.vhd&quot;</span><span class="p">,</span> <span class="s2">&quot;.avhd&quot;</span><span class="p">,</span> <span class="s2">&quot;.avhdx&quot;</span><span class="p">,</span> <span class="s2">&quot;.vhdx&quot;</span><span class="p">,</span> <span class="s2">&quot;.vmdk&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vm_names_browse</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vm_ids_browse</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_advanced_restore_option_list</span> <span class="o">=</span> <span class="p">[]</span>
       
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">content</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the appropriate content from the Subclient relevant to the user.</span>

<span class="sd">            Returns:</span>
<span class="sd">                list - list of content associated with the subclient</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">subclient_content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vmContent</span>

        <span class="k">if</span> <span class="s1">&#39;children&#39;</span> <span class="ow">in</span> <span class="n">subclient_content</span><span class="p">:</span>
            <span class="n">children</span> <span class="o">=</span> <span class="n">subclient_content</span><span class="p">[</span><span class="s1">&#39;children&#39;</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
                <span class="n">path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">child</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">])</span> <span class="k">if</span> <span class="s1">&#39;path&#39;</span> <span class="ow">in</span> <span class="n">child</span> <span class="k">else</span> <span class="kc">None</span>
                <span class="n">display_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">child</span><span class="p">[</span><span class="s1">&#39;displayName&#39;</span><span class="p">])</span>
                <span class="n">content_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_types</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">child</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])]</span>
                <span class="n">vm_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">child</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>

                <span class="n">temp_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">vm_id</span><span class="p">,</span>
                    <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
                    <span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="n">display_name</span><span class="p">,</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">content_type</span>
                <span class="p">}</span>

                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_dict</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">content</span>

    <span class="nd">@content</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subclient_content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates the list of content JSON to pass to the API to add/update content of a</span>
<span class="sd">            Virtual Server Subclient.</span>

<span class="sd">            Args:</span>
<span class="sd">                subclient_content (list)  --  list of the content to add to the subclient</span>

<span class="sd">            Returns:</span>
<span class="sd">                list - list of the appropriate JSON for an agent to send to the POST Subclient API</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">temp_dict</span> <span class="ow">in</span> <span class="n">subclient_content</span><span class="p">:</span>
                <span class="n">virtual_server_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;allOrAnyChildren&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s1">&#39;equalsOrNotEquals&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">temp_dict</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;displayName&#39;</span><span class="p">:</span> <span class="n">temp_dict</span><span class="p">[</span><span class="s1">&#39;display_name&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="n">temp_dict</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_types</span><span class="p">[</span><span class="n">temp_dict</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]]</span>
                <span class="p">}</span>

                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">virtual_server_dict</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;102&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> not given in content&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>

        <span class="n">vs_subclient_content</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="n">content</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_subclient_properties</span><span class="p">(</span><span class="s2">&quot;_vmContent&quot;</span><span class="p">,</span><span class="n">vs_subclient_content</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_subclient_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the subclient  related properties of File System subclient.           </span>
<span class="sd">           </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">VirtualServerSubclient</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_get_subclient_properties</span><span class="p">()</span>
            
        <span class="k">if</span> <span class="s1">&#39;vmContent&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vmContent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">[</span><span class="s1">&#39;vmContent&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;vmDiskFilter&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vmDiskFilter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">[</span><span class="s1">&#39;vmDiskFilter&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;vmFilter&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vmFilter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">[</span><span class="s1">&#39;vmBackupInfo&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;vmBackupInfo&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vmBackupInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">[</span><span class="s1">&#39;vmBackupInfo&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;vsaSubclientProp&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vsaSubclientProp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclient_properties</span><span class="p">[</span><span class="s1">&#39;vsaSubclientProp&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_subclient_content_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the subclient content from property. Base class Abstract method implementation</span>
<span class="sd">        </span>
<span class="sd">        return:</span>
<span class="sd">            VM content  (dict)  -- Dictionary of VM Content with all details</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span>
    
    <span class="k">def</span> <span class="nf">_get_subclient_properties_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;get the all subclient related properties of this subclient.        </span>
<span class="sd">           </span>
<span class="sd">           Returns:</span>
<span class="sd">                dict - all subclient properties put inside a dict</span>
<span class="sd">           </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">subclient_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;subClientProperties&quot;</span><span class="p">:</span>
                <span class="p">{</span>
                    <span class="s2">&quot;vmContent&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vmContent</span><span class="p">,</span>
                    <span class="s2">&quot;proxyClient&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_proxyClient</span><span class="p">,</span>
                    <span class="s2">&quot;subClientEntity&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subClientEntity</span><span class="p">,</span>
                    <span class="s2">&quot;vmDiskFilter&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vmDiskFilter</span><span class="p">,</span>
                    <span class="s2">&quot;vmBackupInfo&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vmBackupInfo</span><span class="p">,</span>
                    <span class="s2">&quot;vsaSubclientProp&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vsaSubclientProp</span><span class="p">,</span>                            
                    <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content</span><span class="p">,</span>
                    <span class="s2">&quot;commonProperties&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_commonProperties</span><span class="p">,</span>
                    <span class="s2">&quot;contentOperationType&quot;</span><span class="p">:</span> <span class="mi">1</span>
                <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">subclient_json</span>
    
    <span class="k">def</span> <span class="nf">_set_default_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">client</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the default client values for VSA and create object for client</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            Client  (str)   -- client name if given</span>
<span class="sd">        </span>
<span class="sd">        Raise Exception:</span>
<span class="sd">            if the client is not part of CS</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">client</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">_backupset_object</span><span class="o">.</span><span class="n">_instance_object</span><span class="o">.</span><span class="n">co_ordinator</span>
    
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">Client</span><span class="p">):</span>
               <span class="n">client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
            <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commcell_object</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;105&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">client</span>
        
    <span class="k">def</span> <span class="nf">_json_restore_virtualServerRstOption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;setter for  the Virtual server restore  option in restore json&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_virtualserver_option_restore_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;isDiskBrowse&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;disk_browse&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
            <span class="s2">&quot;isFileBrowse&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file_browse&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="s2">&quot;isVolumeBrowse&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;viewType&quot;</span><span class="p">:</span> <span class="s2">&quot;DEFAULT&quot;</span><span class="p">,</span>
            <span class="s2">&quot;isBlockLevelReplication&quot;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_json_restore_diskLevelVMRestoreOption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;setter for  the disk Level VM Restore Option    in restore json&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_json_disklevel_option_restore</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;vmFolderName&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;vm_folder&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;dataCenterName&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data_center&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;hostOrCluster&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;host_cluster&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;diskOption&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;disk_option&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="s2">&quot;vmName&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;transportMode&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;transport_mode&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="s2">&quot;passUnconditionalOverride&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;unconditional_overwrite&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="s2">&quot;powerOnVmAfterRestore&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;power_on&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="s2">&quot;registerWithFailoverCluster&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;add_to_failover&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="s2">&quot;userPassword&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;userName&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">},</span>
            <span class="s2">&quot;dataStore&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_json_restore_advancedRestoreOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;setter for the Virtual server restore  option in restore json&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_advanced_option_restore_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Datastore&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;datastore&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;DestinationPath&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;destination_path&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;disks&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;disks&quot;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s2">&quot;guid&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;guid&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;newName&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;new_name&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;esxHost&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;esxhost&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="p">}</span>
    
    <span class="k">def</span> <span class="nf">_advanced_restore_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        populate the advanced restore option list with the dict passed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_advanced_restore_option_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_json_restore_volumeRstOption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;setter for  the Volume restore option for in restore json&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;101&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_volume_restore_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;destinationVendor&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;destination_vendor&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="s2">&quot;volumeLeveRestore&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;volumeLevelRestoreType&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;destinationDiskType&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;destination_disktype&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">}</span>
        
    <span class="k">def</span> <span class="nf">_get_vm_ids_and_names_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parses through the subclient content and creates 2 dictionaries.</span>

<span class="sd">            Returns:</span>
<span class="sd">                dict    -   dictionary consisting of VM ID as Key and VM Display Name as value</span>

<span class="sd">                dict    -   dictionary consisting of VM Display Name as Key and VM ID as value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vm_ids</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vm_names</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
            <span class="n">vm_ids</span><span class="p">[</span><span class="n">content</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]</span>
            <span class="n">vm_names</span><span class="p">[</span><span class="n">content</span><span class="p">[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">vm_ids</span><span class="p">,</span> <span class="n">vm_names</span>

    <span class="k">def</span> <span class="nf">_get_vm_ids_and_names_dict_from_browse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parses through the Browse content and get the VMs Backed up</span>

<span class="sd">            returns :</span>
<span class="sd">                vm_names    (list)  -- returns list of VMs backed up</span>
<span class="sd">                vm_ids      (dict)  -- returns id list of VMs backed up</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_vm_names</span><span class="p">,</span> <span class="n">_vm_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_vm_ids_and_names_dict</span><span class="p">()</span>
        <span class="k">if</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vm_names_browse</span> <span class="o">==</span> <span class="p">[]):</span>
            <span class="n">paths</span><span class="p">,</span> <span class="n">paths_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">_each_path</span> <span class="ow">in</span> <span class="n">paths_dict</span><span class="p">:</span>
                <span class="n">_vm_id</span> <span class="o">=</span> <span class="n">_each_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vm_names_browse</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_vm_id</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vm_ids_browse</span><span class="p">[</span><span class="n">_vm_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">_vm_ids</span><span class="p">[</span><span class="n">_vm_id</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vm_names_browse</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vm_ids_browse</span>

    <span class="k">def</span> <span class="nf">_parse_vm_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vm_names</span><span class="p">,</span> <span class="n">vm_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parses the path provided by user, and replaces the VM Display Name with the VM ID.</span>

<span class="sd">            Returns:</span>
<span class="sd">                str     -   string of path to run browse for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">vm_path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">vm_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">):</span>
                <span class="n">vm_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">vm_path</span>

            <span class="n">vm_path_list</span> <span class="o">=</span> <span class="n">vm_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">vm_name</span> <span class="ow">in</span> <span class="n">vm_names</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">vm_name</span> <span class="ow">in</span> <span class="n">vm_path_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">vm_path</span> <span class="o">=</span> <span class="n">vm_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">vm_path_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vm_names</span><span class="p">[</span><span class="n">vm_name</span><span class="p">])</span>
                    <span class="k">break</span>

        <span class="k">return</span> <span class="n">vm_path</span>

    <span class="k">def</span> <span class="nf">_process_vsa_browse_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vm_ids</span><span class="p">,</span> <span class="n">browse_content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Processes the Browse response and replaces the VM ID with their display name before</span>
<span class="sd">            returning to user.</span>

<span class="sd">            Args:</span>
<span class="sd">                vm_ids          (dict)      --  dictionary with VM ID as Key and VM Name as value</span>

<span class="sd">                browse_content  (tuple)     --  browse response received from server</span>

<span class="sd">            Returns:</span>
<span class="sd">                list - list of all folders or files with their full paths inside the input path</span>

<span class="sd">                dict - path along with the details like name, file/folder, size, modification time</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">browse_content</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">if</span> <span class="n">vm_ids</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">vm_id</span> <span class="ow">in</span> <span class="n">vm_ids</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">vm_id</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
                        <span class="n">browse_content</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">vm_id</span><span class="p">,</span> <span class="n">vm_ids</span><span class="p">[</span><span class="n">vm_id</span><span class="p">])</span>

        <span class="n">temp_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">browse_content</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">vm_ids</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">vm_id</span> <span class="ow">in</span> <span class="n">vm_ids</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">vm_id</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
                        <span class="n">temp_dict</span><span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">vm_id</span><span class="p">,</span> <span class="n">vm_ids</span><span class="p">[</span><span class="n">vm_id</span><span class="p">])]</span> <span class="o">=</span> <span class="n">browse_content</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">path</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">browse_content</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">temp_dict</span>

    <span class="k">def</span> <span class="nf">_process_restore_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vm_names</span><span class="p">,</span> <span class="n">restore_content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Processes the Restore Request and replaces the VM display name with their ID before</span>
<span class="sd">            passing to the API.</span>

<span class="sd">            Args:</span>
<span class="sd">                vm_names            (dict)      --  dictionary with VM Name as Key, VM ID as value</span>

<span class="sd">                restore_content     (tuple)    --  content to restore specified by user</span>

<span class="sd">            Returns:</span>
<span class="sd">                list - list of all folders or files with their full paths inside the input path</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">restore_content</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">vm_names</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">vm_name</span> <span class="ow">in</span> <span class="n">vm_names</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">vm_name</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
                        <span class="n">restore_content</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">vm_name</span><span class="p">,</span> <span class="n">vm_names</span><span class="p">[</span><span class="n">vm_name</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">restore_content</span>

<div class="viewcode-block" id="VirtualServerSubclient.browse"><a class="viewcode-back" href="../../../subclients.html#cvpysdk.subclients.vssubclient.VirtualServerSubclient.browse">[docs]</a>    <span class="k">def</span> <span class="nf">browse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vm_path</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">show_deleted_files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vm_disk_browse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the content of the backup for this subclient at the path specified.</span>

<span class="sd">            Args:</span>
<span class="sd">                vm_path             (str)   --  vm path to get the contents of</span>
<span class="sd">                    default: &#39;\\&#39;; returns the root of the Backup content</span>

<span class="sd">                show_deleted_files  (bool)  --  include deleted files in the content or not</span>
<span class="sd">                    default: True</span>

<span class="sd">                vm_disk_browse      (bool)  --  browse virtual machine files</span>
<span class="sd">                                                    e.g.; .vmdk files, etc.</span>
<span class="sd">                    only applicable when browsing content inside a guest virtual machine</span>
<span class="sd">                    default: False</span>

<span class="sd">            Returns:</span>
<span class="sd">                list - list of all folders or files with their full paths inside the input path</span>

<span class="sd">                dict - path along with the details like name, file/folder, size, modification time</span>

<span class="sd">            Raises:</span>
<span class="sd">                SDKException:</span>
<span class="sd">                    if failed to browse content</span>

<span class="sd">                    if response is empty</span>

<span class="sd">                    if response is not success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vm_ids</span><span class="p">,</span> <span class="n">vm_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_vm_ids_and_names_dict</span><span class="p">()</span>

        <span class="n">vm_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_vm_path</span><span class="p">(</span><span class="n">vm_names</span><span class="p">,</span> <span class="n">vm_path</span><span class="p">)</span>

        <span class="n">browse_content</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">VirtualServerSubclient</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span>
            <span class="n">vm_path</span><span class="p">,</span> <span class="n">show_deleted_files</span><span class="p">,</span> <span class="n">vm_disk_browse</span><span class="p">,</span> <span class="kc">True</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_vsa_browse_response</span><span class="p">(</span><span class="n">vm_ids</span><span class="p">,</span> <span class="n">browse_content</span><span class="p">)</span></div>

<div class="viewcode-block" id="VirtualServerSubclient.browse_in_time"><a class="viewcode-back" href="../../../subclients.html#cvpysdk.subclients.vssubclient.VirtualServerSubclient.browse_in_time">[docs]</a>    <span class="k">def</span> <span class="nf">browse_in_time</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">vm_path</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">show_deleted_files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">restore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">vm_disk_browse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the content of the backup for this subclient</span>
<span class="sd">            at the path specified in the time range specified.</span>

<span class="sd">            Args:</span>
<span class="sd">                vm_path             (str)   --  folder path to get the contents of</span>
<span class="sd">                    default: &#39;\\&#39;; returns the root of the Backup content</span>

<span class="sd">                show_deleted_files  (bool)  --  include deleted files in the content or not</span>
<span class="sd">                    default: True</span>

<span class="sd">                restore_index       (bool)  --  restore index if it is not cached</span>
<span class="sd">                    default: True</span>

<span class="sd">                from_date           (str)   --  date to get the contents after</span>
<span class="sd">                        format: dd/MM/YYYY</span>

<span class="sd">                        gets contents from 01/01/1970 if not specified</span>
<span class="sd">                    default: None</span>

<span class="sd">                to_date             (str)  --  date to get the contents before</span>
<span class="sd">                        format: dd/MM/YYYY</span>

<span class="sd">                        gets contents till current day if not specified</span>
<span class="sd">                    default: None</span>

<span class="sd">            Returns:</span>
<span class="sd">                list - list of all folders or files with their full paths inside the input path</span>

<span class="sd">                dict - path along with the details like name, file/folder, size, modification time</span>

<span class="sd">            Raises:</span>
<span class="sd">                SDKException:</span>
<span class="sd">                    if from date value is incorrect</span>

<span class="sd">                    if to date value is incorrect</span>

<span class="sd">                    if to date is less than from date</span>

<span class="sd">                    if failed to browse content</span>

<span class="sd">                    if response is empty</span>

<span class="sd">                    if response is not success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vm_ids</span><span class="p">,</span> <span class="n">vm_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_vm_ids_and_names_dict</span><span class="p">()</span>

        <span class="n">vm_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_vm_path</span><span class="p">(</span><span class="n">vm_names</span><span class="p">,</span> <span class="n">vm_path</span><span class="p">)</span>

        <span class="n">browse_content</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">VirtualServerSubclient</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span>
            <span class="n">show_deleted_files</span><span class="p">,</span> <span class="n">restore_index</span><span class="p">,</span> <span class="n">vm_disk_browse</span><span class="p">,</span> <span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">vm_path</span><span class="p">,</span><span class="n">vm_disk_browse</span> <span class="o">=</span> <span class="n">vm_disk_browse</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_vsa_browse_response</span><span class="p">(</span><span class="n">vm_ids</span><span class="p">,</span> <span class="n">browse_content</span><span class="p">)</span></div>

<div class="viewcode-block" id="VirtualServerSubclient.disk_level_browse"><a class="viewcode-back" href="../../../subclients.html#cvpysdk.subclients.vssubclient.VirtualServerSubclient.disk_level_browse">[docs]</a>    <span class="k">def</span> <span class="nf">disk_level_browse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vm_path</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span>
                          <span class="n">show_deleted_files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">restore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">from_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">to_date</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Browses the Disks of a Virtual Machine.</span>

<span class="sd">            Args:</span>
<span class="sd">                vm_path             (str)   --  vm path to get the contents of</span>
<span class="sd">                    default: &#39;\\&#39;; returns the root of the Backup content</span>

<span class="sd">                show_deleted_files  (bool)  --  include deleted files in the content or not</span>
<span class="sd">                    default: True</span>


<span class="sd">                from_date           (str)   --  date to get the contents after</span>
<span class="sd">                        format: dd/MM/YYYY</span>

<span class="sd">                        gets contents from 01/01/1970 if not specified</span>
<span class="sd">                    default: None</span>

<span class="sd">                to_date             (str)  --  date to get the contents before</span>
<span class="sd">                        format: dd/MM/YYYY</span>

<span class="sd">                        gets contents till current day if not specified</span>
<span class="sd">                    default: None</span>

<span class="sd">            Returns:</span>
<span class="sd">                list - list of all folders or files with their full paths inside the input path</span>

<span class="sd">                dict - path along with the details like name, file/folder, size, modification time</span>

<span class="sd">            Raises:</span>
<span class="sd">                SDKException:</span>
<span class="sd">                    if failed to browse content</span>

<span class="sd">                    if response is empty</span>

<span class="sd">                    if response is not success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">browse_content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">browse_in_time</span><span class="p">(</span>
            <span class="n">vm_path</span><span class="p">,</span> <span class="n">show_deleted_files</span><span class="p">,</span> <span class="n">restore_index</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span>
        <span class="p">)</span>

        <span class="n">paths_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">browse_content</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">any</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">Ext</span><span class="p">)</span> <span class="k">for</span> <span class="n">Ext</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">diskExtension</span><span class="p">)):</span>
                <span class="n">paths_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="n">paths_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">browse_content</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">any</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">Ext</span><span class="p">)</span> <span class="k">for</span> <span class="n">Ext</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">diskExtension</span><span class="p">)):</span>
                <span class="n">paths_dict</span><span class="p">[</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">browse_content</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">path</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">paths_list</span> <span class="ow">and</span> <span class="n">paths_dict</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">paths_list</span><span class="p">,</span> <span class="n">paths_dict</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;113&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="VirtualServerSubclient.guest_files_browse"><a class="viewcode-back" href="../../../subclients.html#cvpysdk.subclients.vssubclient.VirtualServerSubclient.guest_files_browse">[docs]</a>    <span class="k">def</span> <span class="nf">guest_files_browse</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">vm_path</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">show_deleted_files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">restore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Browses the Files and Folders inside a Virtual Machine in the time range specified.</span>

<span class="sd">            Args:</span>
<span class="sd">                vm_path             (str)   --  folder path to get the contents of</span>
<span class="sd">                    default: &#39;\\&#39;; returns the root of the Backup content</span>

<span class="sd">                show_deleted_files  (bool)  --  include deleted files in the content or not</span>
<span class="sd">                    default: True</span>

<span class="sd">                restore_index       (bool)  --  restore index if it is not cached</span>
<span class="sd">                    default: True</span>

<span class="sd">                from_date           (str)   --  date to get the contents after</span>
<span class="sd">                        format: dd/MM/YYYY</span>

<span class="sd">                        gets contents from 01/01/1970 if not specified</span>
<span class="sd">                    default: None</span>

<span class="sd">                to_date             (str)  --  date to get the contents before</span>
<span class="sd">                        format: dd/MM/YYYY</span>

<span class="sd">                        gets contents till current day if not specified</span>
<span class="sd">                    default: None</span>

<span class="sd">            Returns:</span>
<span class="sd">                list - list of all folders or files with their full paths inside the input path</span>

<span class="sd">                dict - path along with the details like name, file/folder, size, modification time</span>

<span class="sd">            Raises:</span>
<span class="sd">                SDKException:</span>
<span class="sd">                    if from date value is incorrect</span>

<span class="sd">                    if to date value is incorrect</span>

<span class="sd">                    if to date is less than from date</span>

<span class="sd">                    if failed to browse content</span>

<span class="sd">                    if response is empty</span>

<span class="sd">                    if response is not success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">browse_in_time</span><span class="p">(</span>
            <span class="n">vm_path</span><span class="p">,</span> <span class="n">show_deleted_files</span><span class="p">,</span> <span class="n">restore_index</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span>
        <span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_check_folder_in_browse</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">_vm_id</span><span class="p">,</span>
            <span class="n">_folder_to_restore</span><span class="p">,</span>
            <span class="n">from_date</span><span class="p">,</span>
            <span class="n">to_date</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the particular folder is present in browse of the subclient in particular VM</span>

<span class="sd">        args:</span>
<span class="sd">            _vm_id      (str)      -- VM id from which folder has to be restored</span>

<span class="sd">            folder_path     (str)   -- folder path whioch has to be restored</span>

<span class="sd">        exception:</span>
<span class="sd">            raise exception</span>
<span class="sd">                if folder is not present in browse</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">source_item</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">_folder_to_restore</span> <span class="o">=</span> <span class="n">_folder_to_restore</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">_restore_folder_name</span> <span class="o">=</span> <span class="n">_folder_to_restore</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">_folder_to_restore</span> <span class="o">=</span> <span class="n">_folder_to_restore</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">_restore_folder_name</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">_source_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">_vm_id</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">_folder_to_restore</span>

        <span class="n">_browse_files</span><span class="p">,</span> <span class="n">_browse_files_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">guest_files_browse</span><span class="p">(</span>
            <span class="n">_source_path</span><span class="p">,</span> <span class="n">from_date</span><span class="o">=</span><span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span><span class="o">=</span><span class="n">to_date</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">_path</span> <span class="ow">in</span> <span class="n">_browse_files_dict</span><span class="p">:</span>
            <span class="n">_browse_folder_name</span> <span class="o">=</span> <span class="n">_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span><span class="p">(</span><span class="n">_browse_folder_name</span> <span class="o">==</span> <span class="n">_restore_folder_name</span><span class="p">):</span>
                <span class="n">source_item</span> <span class="o">=</span> <span class="n">_path</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">source_item</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;SubClient&#39;</span><span class="p">,</span> <span class="s1">&#39;113&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_source_path</span>

<div class="viewcode-block" id="VirtualServerSubclient.guest_file_restore"><a class="viewcode-back" href="../../../subclients.html#cvpysdk.subclients.vssubclient.VirtualServerSubclient.guest_file_restore">[docs]</a>    <span class="k">def</span> <span class="nf">guest_file_restore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">vm_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">folder_to_restore</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">destination_client</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">destination_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">copy_preceedence</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">preserve_level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">restore_ACL</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">unconditional_overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">from_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">to_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">show_deleted_files</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;perform Guest file restore of the provided path</span>

<span class="sd">        Args:</span>
<span class="sd">            vm_name             (str)   --  VM from which files needs to be restored</span>

<span class="sd">            folder_to_restore    (str)   --  folder path to restore </span>

<span class="sd">            show_deleted_files  (bool)  --  include deleted files in the content or not</span>
<span class="sd">                default: True</span>


<span class="sd">            destination_path    (str)   -- path to restore</span>

<span class="sd">            from_date           (str)   --  date to get the contents after</span>
<span class="sd">                    format: dd/MM/YYYY</span>

<span class="sd">                    gets contents from 01/01/1970 if not specified</span>
<span class="sd">                default: None</span>

<span class="sd">            to_date             (str)  --  date to get the contents before</span>
<span class="sd">                    format: dd/MM/YYYY</span>

<span class="sd">                    gets contents till current day if not specified</span>
<span class="sd">                default: None</span>

<span class="sd">         Raises:</span>
<span class="sd">                SDKException:</span>
<span class="sd">                    if from date value is incorrect</span>

<span class="sd">                    if to date value is incorrect</span>

<span class="sd">                    if to date is less than from date</span>

<span class="sd">                    if failed to browse content</span>

<span class="sd">                    if response is empty</span>

<span class="sd">                    if response is not success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_vm_names</span><span class="p">,</span> <span class="n">_vm_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_vm_ids_and_names_dict_from_browse</span><span class="p">()</span>
        <span class="n">_file_restore_option</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># check if inputs are correct</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">destination_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">and</span>
            <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">vm_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">folder_to_restore</span><span class="p">,</span> <span class="nb">str</span><span class="p">))):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;105&#39;</span><span class="p">)</span>

        <span class="k">if</span><span class="p">(</span><span class="ow">not</span><span class="p">(</span><span class="n">vm_name</span> <span class="ow">in</span> <span class="n">_vm_names</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;111&#39;</span><span class="p">)</span>

        <span class="c1"># check if client name is correct</span>
        <span class="k">if</span><span class="p">(</span><span class="n">destination_client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">destination_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_backupset_object</span><span class="o">.</span><span class="n">_instance_object</span><span class="o">.</span><span class="n">co_ordinator</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">destination_client</span><span class="p">,</span> <span class="n">Client</span><span class="p">):</span>
            <span class="n">client</span> <span class="o">=</span> <span class="n">destination_client</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">destination_client</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_commcell_object</span><span class="p">,</span> <span class="n">destination_client</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span> <span class="s1">&#39;105&#39;</span><span class="p">)</span>

        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;client_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">client_name</span>
        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;destination_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">destination_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_restore_destination_json</span><span class="p">(</span><span class="n">_file_restore_option</span><span class="p">)</span>

        <span class="c1"># preocess the folder to restore for browse</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">folder_to_restore</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="n">_folder_to_restore_list</span> <span class="o">=</span> <span class="n">folder_to_restore</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">_folder_to_restore_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">_folder_to_restore_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">folder_to_restore</span><span class="p">)</span>

        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;source_item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_each_folder</span> <span class="ow">in</span> <span class="n">_folder_to_restore_list</span><span class="p">:</span>
            <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;source_item&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_check_folder_in_browse</span><span class="p">(</span><span class="n">_vm_ids</span><span class="p">[</span><span class="n">vm_name</span><span class="p">],</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">_each_folder</span><span class="p">,</span> <span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_restore_fileoption_json</span><span class="p">(</span><span class="n">_file_restore_option</span><span class="p">)</span>

        <span class="c1"># set the browse options</span>
        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;disk_browse&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;file_browse&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_json_restore_virtualServerRstOption</span><span class="p">(</span><span class="n">_file_restore_option</span><span class="p">)</span>

        <span class="c1"># set the common file level restore options</span>
        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;striplevel_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;PRESERVE_LEVEL&quot;</span>
        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;preserve_level&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">preserve_level</span>
        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;unconditional_overwrite&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unconditional_overwrite</span>
        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;restore_ACL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">restore_ACL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_restore_commonOptions_json</span><span class="p">(</span><span class="n">_file_restore_option</span><span class="p">)</span>

        <span class="c1"># set the browse option</span>
        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;copy_precedence_applicable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">_file_restore_option</span><span class="p">[</span><span class="s2">&quot;copy_precedence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy_preceedence</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_restore_browse_option_json</span><span class="p">(</span><span class="n">_file_restore_option</span><span class="p">)</span>

        <span class="c1"># set the rest setters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_impersonation_json</span><span class="p">(</span><span class="n">_file_restore_option</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_json_restore_virtualServerRstOption</span><span class="p">(</span><span class="n">_file_restore_option</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_json_restore_volumeRstOption</span><span class="p">(</span><span class="n">_file_restore_option</span><span class="p">)</span>

        <span class="c1"># prepare and execute the Json</span>
        <span class="n">request_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_filelevel_restore_json</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_restore_response</span><span class="p">(</span><span class="n">request_json</span><span class="p">)</span></div>

<div class="viewcode-block" id="VirtualServerSubclient.vm_files_browse"><a class="viewcode-back" href="../../../subclients.html#cvpysdk.subclients.vssubclient.VirtualServerSubclient.vm_files_browse">[docs]</a>    <span class="k">def</span> <span class="nf">vm_files_browse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vm_path</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">show_deleted_files</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Browses the Files and Folders of a Virtual Machine.</span>

<span class="sd">            Args:</span>
<span class="sd">                vm_path             (str)   --  vm path to get the contents of</span>
<span class="sd">                    default: &#39;\\&#39;; returns the root of the Backup content</span>

<span class="sd">                show_deleted_files  (bool)  --  include deleted files in the content or not</span>
<span class="sd">                    default: True</span>

<span class="sd">            Returns:</span>
<span class="sd">                list - list of all folders or files with their full paths inside the input path</span>

<span class="sd">                dict - path along with the details like name, file/folder, size, modification time</span>

<span class="sd">            Raises:</span>
<span class="sd">                SDKException:</span>
<span class="sd">                    if failed to browse content</span>

<span class="sd">                    if response is empty</span>

<span class="sd">                    if response is not success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">vm_path</span><span class="p">,</span> <span class="n">show_deleted_files</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="VirtualServerSubclient.vm_files_browse_in_time"><a class="viewcode-back" href="../../../subclients.html#cvpysdk.subclients.vssubclient.VirtualServerSubclient.vm_files_browse_in_time">[docs]</a>    <span class="k">def</span> <span class="nf">vm_files_browse_in_time</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">vm_path</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">show_deleted_files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">restore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">from_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">to_date</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Browses the Files and Folders of a Virtual Machine in the time range specified.</span>

<span class="sd">            Args:</span>
<span class="sd">                vm_path             (str)   --  folder path to get the contents of</span>
<span class="sd">                    default: &#39;\\&#39;; returns the root of the Backup content</span>

<span class="sd">                show_deleted_files  (bool)  --  include deleted files in the content or not</span>
<span class="sd">                    default: True</span>

<span class="sd">                restore_index       (bool)  --  restore index if it is not cached</span>
<span class="sd">                    default: True</span>

<span class="sd">                from_date           (str)   --  date to get the contents after</span>
<span class="sd">                        format: dd/MM/YYYY</span>

<span class="sd">                        gets contents from 01/01/1970 if not specified</span>
<span class="sd">                    default: None</span>

<span class="sd">                to_date             (str)  --  date to get the contents before</span>
<span class="sd">                        format: dd/MM/YYYY</span>

<span class="sd">                        gets contents till current day if not specified</span>
<span class="sd">                    default: None</span>

<span class="sd">            Returns:</span>
<span class="sd">                list - list of all folders or files with their full paths inside the input path</span>

<span class="sd">                dict - path along with the details like name, file/folder, size, modification time</span>

<span class="sd">            Raises:</span>
<span class="sd">                SDKException:</span>
<span class="sd">                    if from date value is incorrect</span>

<span class="sd">                    if to date value is incorrect</span>

<span class="sd">                    if to date is less than from date</span>

<span class="sd">                    if failed to browse content</span>

<span class="sd">                    if response is empty</span>

<span class="sd">                    if response is not success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">browse_in_time</span><span class="p">(</span>
            <span class="n">vm_path</span><span class="p">,</span> <span class="n">show_deleted_files</span><span class="p">,</span> <span class="n">restore_index</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span>
        <span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_get_disk_Extension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">disk_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the Extension of all disk in the list</span>

<span class="sd">        Args:</span>
<span class="sd">            disk_list   (LIST)  -- get the disk List</span>

<span class="sd">        return:</span>
<span class="sd">            extn_list   (LIST)  --  returns the Extension List of the disk list </span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_extn_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">each_disk</span> <span class="ow">in</span> <span class="n">disk_list</span><span class="p">:</span>
            <span class="n">_disk_name</span><span class="p">,</span> <span class="n">_extn_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">each_disk</span><span class="p">)</span>
            <span class="n">_extn_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_extn_name</span><span class="p">)</span>

        <span class="n">_extn_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">_extn_list</span><span class="p">))</span>

        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">_extn_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_extn_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_extn_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_conversion_disk_Type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">_src_disk_extn</span> <span class="p">,</span> <span class="n">_dest_disk_extn</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return volume restore type and destiantion disk Type</span>

<span class="sd">        Args:</span>
<span class="sd">            src_disk_extn   (str)   --  source disk extension of the disk</span>
<span class="sd">            dest_disk_extn  (str)   --  Extension to which disk is converted</span>

<span class="sd">        return</span>
<span class="sd">            _vol_restore_type   (str)   -- value of Volume restore type parameter of the XML</span>
<span class="sd">            _dest_disk_type     (str)   -- value of destination Disk Type parameter of the XML</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">disk_conversion</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;vhdx&quot;</span><span class="p">:{</span> <span class="s2">&quot;vhd&quot;</span><span class="p">:(</span><span class="s2">&quot;VIRTUAL_HARD_DISKS&quot;</span><span class="p">,</span><span class="s2">&quot;VHD_DYNAMIC&quot;</span><span class="p">),</span>
                                     <span class="s2">&quot;vmdk&quot;</span><span class="p">:(</span><span class="s2">&quot;VMDK_FILES&quot;</span><span class="p">,</span><span class="s2">&quot;VMDK_VCB4&quot;</span><span class="p">)</span>                 
                                   <span class="p">},</span>
                            <span class="s2">&quot;vmdk&quot;</span><span class="p">:{</span> <span class="s2">&quot;vhd&quot;</span><span class="p">:(</span><span class="s2">&quot;VIRTUAL_HARD_DISKS&quot;</span><span class="p">,</span><span class="s2">&quot;VHD_DYNAMIC&quot;</span><span class="p">),</span>
                                     <span class="s2">&quot;vhdx&quot;</span><span class="p">:(</span><span class="s2">&quot;VIRTUAL_HARD_DISKS&quot;</span><span class="p">,</span><span class="s2">&quot;VHDX_DYNAMIC&quot;</span><span class="p">)</span>                 
                                   <span class="p">}</span>            
                            <span class="p">}</span>
        <span class="n">_src_disk_extn</span>  <span class="o">=</span> <span class="n">_src_disk_extn</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">_dest_disk_extn</span> <span class="o">=</span> <span class="n">_dest_disk_extn</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">disk_conversion</span><span class="p">[</span><span class="n">_src_disk_extn</span><span class="p">][</span><span class="n">_dest_disk_extn</span><span class="p">]</span>


    <span class="k">def</span> <span class="nf">_set_vm_to_restore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">vm_to_restore</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span><span class="n">restore_option</span> <span class="o">=</span> <span class="p">{}):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        check whether the VMs provided for restore is backued up else assume</span>
<span class="sd">                            Vm_to_restore with default</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            vm_to_restore   (list)      -- list of Vm to restore</span>
<span class="sd">            </span>
<span class="sd">            restore_option  (dict)      -- dict with all restore options</span>
<span class="sd">        </span>
<span class="sd">        return:</span>
<span class="sd">            vm_to_restore   (list)      -- Final list of Vm need to be restored</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vm_names_browse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_vm_ids_and_names_dict_from_browse</span><span class="p">()</span>
        
        <span class="c1"># set vms to restore</span>
        <span class="n">_temp_res_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">vm_to_restore</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vm_to_restore</span> <span class="o">=</span> <span class="n">restore_option</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;vm_to_restore&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vm_ids_browse</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">_temp_res_list</span> <span class="o">=</span> <span class="n">vm_to_restore</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">_temp_res_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vm_to_restore</span><span class="p">)</span>
            
        <span class="n">vm_to_restore</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vm_names_browse</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">_temp_res_list</span><span class="p">))</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">vm_to_restore</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SDKException</span><span class="p">(</span><span class="s1">&#39;Subclient&#39;</span><span class="p">,</span><span class="mi">104</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">vm_to_restore</span>
    
    <span class="k">def</span> <span class="nf">_set_advanced_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">restore_option</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set all the advanced properties of the subclient restore</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            restore_option  (dict)  -- restore option dictionary where advanced</span>
<span class="sd">                                            properties to be appended</span>
<span class="sd">            </span>
<span class="sd">            **kwargs                --  Keyword arguments with key as property name</span>
<span class="sd">                                            and its value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">restore_option</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">restore_option</span><span class="p">[</span><span class="s2">&quot;destination_vendor&quot;</span><span class="p">]</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_backupset_object</span><span class="o">.</span><span class="n">_instance_object</span><span class="o">.</span><span class="n">_vendorid</span>
    
    <span class="k">def</span> <span class="nf">_set_vm_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">restore_option</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set all the advanced properties of the subclient restore for VM</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            restore_option  (dict)  -- restore option dictionary where advanced</span>
<span class="sd">                                            properties to be appended</span>
<span class="sd">            </span>
<span class="sd">            **kwargs                --  Keyword arguments with key as property name</span>
<span class="sd">                                            and its value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">restore_option</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">_prepare_filelevel_restore_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prepares the  file level restore json from getters </span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">request_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;taskInfo&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;associations&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_association_json</span><span class="p">()],</span>
                <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json_task</span><span class="p">(),</span>
                <span class="s2">&quot;subTasks&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;subTask&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json_restore_subtask</span><span class="p">(),</span>
                        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;restoreOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;impersonation&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_impersonation_json_</span><span class="p">,</span>
                                <span class="s2">&quot;virtualServerRstOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_virtualserver_option_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;volumeRstOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_volume_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;browseOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_browse_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;commonOptions&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_commonoption_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_destination_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;fileOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fileoption_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;sharePointRstOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restore_sharepoint_json</span><span class="p">()</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}]</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">request_json</span>

    <span class="k">def</span> <span class="nf">_prepare_disk_restore_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepare disk retsore Json with all getters</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_virt_restore_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_virtualserver_option_restore_json</span>
        <span class="n">_virt_restore_json</span><span class="p">[</span><span class="s2">&quot;diskLevelVMRestoreOption&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json_disklevel_option_restore</span>

        <span class="n">request_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;taskInfo&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;associations&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_association_json</span><span class="p">()],</span>
                <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_task_json</span><span class="p">(),</span>
                <span class="s2">&quot;subTasks&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;subTask&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restore_subtask_json</span><span class="p">(),</span>
                        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;restoreOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;impersonation&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_impersonation_json_</span><span class="p">,</span>
                                <span class="s2">&quot;virtualServerRstOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_virtualserver_option_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;volumeRstOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_volume_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;browseOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_browse_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;commonOptions&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_commonoption_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_destination_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;fileOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fileoption_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;sharePointRstOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restore_sharepoint_json</span><span class="p">()</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}]</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">request_json</span>

    <span class="k">def</span> <span class="nf">_prepare_fullvm_restore_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepare Full VM restore Json with all getters</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_virt_restore_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_virtualserver_option_restore_json</span>
        <span class="n">_virt_restore_json</span><span class="p">[</span><span class="s2">&quot;diskLevelVMRestoreOption&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json_disklevel_option_restore</span>
        <span class="n">_virt_restore_json</span><span class="p">[</span><span class="s2">&quot;diskLevelVMRestoreOption&quot;</span><span class="p">][</span><span class="s2">&quot;advancedRestoreOptions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_advanced_restore_option_list</span>

        <span class="n">request_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;taskInfo&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;associations&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_association_json</span><span class="p">()],</span>
                <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_task_json</span><span class="p">(),</span>
                <span class="s2">&quot;subTasks&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;subTask&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restore_subtask_json</span><span class="p">(),</span>
                        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;restoreOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;impersonation&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_impersonation_json_</span><span class="p">,</span>
                                <span class="s2">&quot;virtualServerRstOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_virtualserver_option_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;volumeRstOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_volume_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;browseOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_browse_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;commonOptions&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_commonoption_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_destination_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;fileOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fileoption_restore_json</span><span class="p">,</span>
                                <span class="s2">&quot;sharePointRstOption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restore_sharepoint_json</span><span class="p">()</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}]</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">request_json</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Commvault Systems Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
    </div>

    

    
  </body>
</html>